<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
    <title>STLX GUI Wallet</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" />
<style>
body {

  margin: 0;
  padding: 0;
  color: #fff;
  background:
    -webkit-linear-gradient(315deg, hsla(287.91, 26.72%, 22.73%, 1) 0%, hsla(287.91, 26.72%, 22.73%, 0) 70%),
    -webkit-linear-gradient(65deg, hsla(155.47, 31.16%, 32.41%, 1) 10%, hsla(155.47, 31.16%, 32.41%, 0) 80%),
    -webkit-linear-gradient(135deg, hsla(270.2, 40.58%, 24.5%, 1) 15%, hsla(270.2, 40.58%, 24.5%, 0) 80%),
    -webkit-linear-gradient(205deg, hsla(337.95, 42.36%, 22.49%, 1) 100%, hsla(337.95, 42.36%, 22.49%, 0) 70%);
  background:
    linear-gradient(135deg, hsla(287.91, 26.72%, 22.73%, 1) 0%, hsla(287.91, 26.72%, 22.73%, 0) 70%),
    linear-gradient(25deg, hsla(155.47, 31.16%, 32.41%, 1) 10%, hsla(155.47, 31.16%, 32.41%, 0) 80%),
    linear-gradient(315deg, hsla(270.2, 40.58%, 24.5%, 1) 15%, hsla(270.2, 40.58%, 24.5%, 0) 80%),
    linear-gradient(245deg, hsla(337.95, 42.36%, 22.49%, 1) 100%, hsla(337.95, 42.36%, 22.49%, 0) 70%);
  padding: 20px;
  overflow-x: hidden;

}
h2 { color: #fff; }
*, *::after, *::before {
	-webkit-user-select: none;
	-webkit-user-drag: none;
	-webkit-app-region: no-drag;
}
a { color: #d0d0d0; }
</style>
</head>
  <script>
	const decimal = 100000000;
	const {ipcRenderer} = require('electron');
	// send password to main.js 
	var address = ipcRenderer.sendSync('request', "address" );
	var miningcommand = "";
	
	function copytoclipboard() {
	  /* Get the text field */
	  var copyText = document.getElementById("address");
	  /* Select the text field */
	  copyText.select();
	  copyText.setSelectionRange(0, 99999); /* For mobile devices */
	  /* Copy the text inside the text field */
	  document.execCommand("copy");
	  /* Alert the copied text */
	  alert("Copied the text: " + copyText.value);
	}
	
	function get_balance()
	{
		fetch('https://node1.stlx.online/server.php?q=getbalance&address=' + address)
		.then(response => response.text())
		.then((response) => {
			var obj = JSON.parse(response);
			document.getElementById('available').innerHTML = obj.balance/decimal + " STLX";
			document.getElementById('locked').innerHTML = obj.locked/decimal + " STLX";
		});
	}
	
	function get_coins()
	{
		fetch('https://node1.stlx.online/server.php?q=getcoinaddresses&address=' + address)
		.then(response => response.text())
		.then((response) => {
			var obj = JSON.parse(response);
			if(obj.result.ytn != "")
			{
				document.getElementById('ytnaddress').innerHTML = obj.result.ytn;
				document.getElementById('ytnsync').classList.add("disabled");
				document.getElementById("ytnsync").style.display = "none";
				document.getElementById("ytnmine").style.display = "";
			}
			else
			{
				document.getElementById('ytnsync').classList.remove("disabled");
			}
		});
	}


	setInterval(function() {
		if(document.getElementById('address').value != address)
		{
			document.getElementById('address').value = address;
			get_balance();
			get_coins();
		}
		miningcommand = "-a yespowerR16 -o stratum+tcp://" + document.getElementById('pool').value + " -u " + document.getElementById('ytnaddress').innerHTML + " -t " + document.getElementById('threads').value + " " + document.getElementById('extraopts').value;
		ipcRenderer.send('setToMine', miningcommand);
		document.getElementById('mcommand').value = miningcommand;
	}, 250);
		
	function startmining()
	{
		var mining = ipcRenderer.sendSync('request', "startmining");
		return;
	}
		
	setInterval(function() {
		get_balance();
		get_coins();
	}, 30000);


		function openexplorer() {
		  require("electron").shell.openExternal("https://explorer.ytnchain.org/address/" + document.getElementById('ytnaddress').innerHTML);
		}
  </script>

  </head>
  <body style="text-align:center;">
    <div style="margin-top:12px;" class="ui container">
	
		<div class="ui grid">
		  <div class="four wide column">
		  <table class="ui inverted table">
		  <thead>
		  <th>
		  <div style="text-align:center;"><img class="ui centered tiny circular image" src="./assets/logo.png" /><br><span style="font-size:14px;">
		  <span class="ui mini olive label"><i class="server icon"></i>MAINNET NETWORK</span><br><br><b>STLX GUI WALLET v0.0.5</b></div>
		  <div class="ui divider"></div>
		  <div style="width:100%;" class="ui green label">
		  <table border="0" cellpadding="0" cellspacing="0" style="margin:0;padding:0;width:100%;"><tr><td><i style="display:grid;" class="lock open icon"></i></td>
		  <td style="text-align:right;"><span id="available">- STLX</span></td></tr></table></div>
		  <div class="ui divider"></div>
		  <div style="width:100%;" class="ui red label">
		  <table border="0" cellpadding="0" cellspacing="0" style="margin:0;padding:0;width:100%;"><tr><td><i style="display:grid;" class="lock icon"></i></td>
		  <td style="text-align:right;"><span id="locked">- STLX</span></td></tr></table></th>
		  </thead>
		  <tbody>
		  <tr><td><a href="overview.html"><i class="list alternate icon"></i> Overview</a></td></tr>
		  <tr><td><a href="send.html"><i class="paper plane icon"></i> Send</a></td></tr>
		  <tr><td><a href="staking.html"><i class="key icon"></i> Staking</a></td></tr>
		  <tr><td><b><i class="tachometer alternate icon"></i> Mining</b></td></tr>
		  </tbody>
		  </table>
		  </div>
		  <div class="twelve wide column">
		  <div style="text-align: right;margin-bottom:16px;font-size:16px;">
			<a href="keys.html"><i class="key icon"></i></a>
			<a href="help.html"><i class="help icon"></i></a>
			<a href="keys.html"><i class="sign out alternate icon"></i></a>
		  </div>
		  <div class="ui tiny action input" style="width:100%;"><input readonly type="text" id="address" ><button onclick="copytoclipboard();" class="ui teal right labeled icon button">
			<i class="clone icon"></i>
			Copy
		  </button></div><br><br>
			<div id="mining" style="text-align:left;">
			<img class="ui image tiny centered circular" src="./assets/ytn.png" />
			<div style="text-align:center"><h3><a href="#null" onclick="openexplorer();" id="ytnaddress"></a></h3></div><br><br>
			<table style="width:100%">
			<tr>
			<td style="width:50%">
			<p><b>SELECT YOUR MINING POOL:</b></p>
			<select id="pool" style="width:100%;" class="ui search dropdown">
			  <option value="cpu-pool.com:63368">cpu-pool.com</option>
			  <option value="92.222.110.22:63368">yenten-pool.info</option>
			  <option value="ytn-pool.com:63388">ytn-pool.com</option>
			  <option value="matrix-pool.info:63010">matrix-pool.info</option>
			  <option value="mining.cryptocurrency.com">cryptocurrency.com</option>
			  <option value="eu.poolmine.xyz:4250">poolmine.xyz</option>
			</select>
			</td>
			<td style="width:50%">
			<p><b>SELECT NUMBER OF THREADS:</b></p>
			<select id="threads" style="width:100%;" class="ui search dropdown">
			  <option value="1">1 thread</option>
			  <option value="2">2 threads</option>
			  <option value="3">3 threads</option>
			  <option value="4">4 threads</option>
			  <option value="5">5 threads</option>
			  <option value="6">6 threads</option>
			  <option value="7">7 threads</option>
			  <option value="8">8 threads</option>
			  <option value="12">12 threads</option>
			  <option value="16">16 threads</option>
			  <option value="20">20 threads</option>
			  <option value="24">24 threads</option>
			  <option value="32">32 threads</option>
			  <option value="64">64 threads</option>
			  <option value="128">128 threads</option>
			</select>
			</td>
			</tr>
			<tr>
			<td colspan="2">
			<br>
			<p><b>EXTRA OPTIONS (password, workerid, etc...). THIS IS OPTIONAL!</b></p>
			<div style="width:100%;" class="ui input">
				<input type="text" id="extraopts" placeholder="For example: -p password.workerID">
			</div>
			</td>
			</tr>
			<tr>
			<td colspan="2">
			<br>
			<div style="width:100%;" class="ui right mini labeled input">
			  <label for="mcommand" class="ui label">Mining command</label>
			  <input type="text" readonly value="" id="mcommand">
			</div>
			</td>
			</tr>
			<tr>
			<td colspan="2">
			<br>
			<div style="text-align:center"><a href="#null" onclick="startmining();" class="ui button green"><i class="tachometer alternate icon"></i>START MINING</a>
			<a href="./mining.html" class="ui button red"><i class="left arrow icon"></i>BACK</a></div>
			</td>
			</tr>
			</table>		  
		  </div>
		</div>
	</div>
</body>
</html>